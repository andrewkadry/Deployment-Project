version: 2.1
orbs:
  node: circleci/node@5.0.1
  aws-cli: circleci/aws-cli@2.1.0
  aws-elastic-beanstalk: circleci/aws-elastic-beanstalk@2.0.1

  jobs:
    build:
      docker:
        - image: cimg/base:2021.04 
      steps:
        - node/install
        - checkout
        - aws-cli/setup
        - aws-elastic-beanstalk/setup
        - run:
          name: install frontend
          command: npm run install:frontend
        - run:
          name: install backend
          command: npm run install:backend
        - run:
          name: build frontend
          command: npm run build:frontend
        - run:
          name: build backend
          command: npm run build:backend
        - run:
          name: deploy frontend
          command: npm run deploy:frontend
        - run:
          name: deploy backend
          command: npm run deploy:backend

      
        

